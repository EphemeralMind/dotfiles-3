/*
 * Usage:
 * First create a userChrome.css file in ~/.mozilla/firefox/[id]/chrome/
 * Then add the following snippet to that file:
 *		@import url('file:///home/[username]/.firefoxcss/main.css');
 * Save the file
 * In order to generate the css variables containing the colors do
 *		./xrdbtocss.sh > colors.css
 * in the directory this file's in
 */

@import url('./colors.css');

:root {
	--chrome-background-color: var(--background) !important;
	--chrome-color: var(--foreground) !important;
	--chrome-nav-bar-controls-border-color: hsla(240, 5%, 5%, .3) !important;
	--chrome-nav-bar-separator-color: rgba(0,0,0,.2) !important;
	--chrome-nav-buttons-background: hsla(240, 5%, 5%, .1) !important;
	--chrome-nav-buttons-hover-background: hsla(240, 5%, 5%, .15) !important;
	--chrome-secondary-background-color: var(--background) !important;
	--chrome-selection-background-color: var(--foreground) !important;
	--chrome-selection-color: var(--background) !important;

	--panel-separator-color: var(--background) !important;

	--tab-line-color: var(--color4) !important;
	--tabs-border: var(--color8) !important;

	--toolbar-bgcolor: var(--toolbar-non-lwt-bgcolor) !important;
	--toolbar-bgimage: var(--toolbar-non-lwt-bgimage) !important;
	--toolbar-border-bottom-color: red !important;
	--toolbar-color: var(--foreground) !important;
	--toolbar-non-lwt-bgcolor: var(--background) !important;
	--toolbar-non-lwt-bgimage: none !important;
	--toolbar-non-lwt-textcolor: var(--foreground) !important;
	--toolbarbutton-icon-fill-opacity: 1 !important;

	--toolbox-border-bottom-color: hsla(240, 5%, 5%, .1) !important;

	--url-and-searchbar-background-color: rgb(71, 71, 73) !important;
	--url-and-searchbar-color: var(--chrome-color) !important;
	--urlbar-separator-color: currentColor !important;
}

* {
	font: 11px "Scientifica" !important;
}

.tab-background {
	border-top: none !important;;
}

.toolbarbutton-animatable-box[brighttext],
toolbar[brighttext] .toolbarbutton-animatable-box,
toolbar[brighttext] .toolbarbutton-1 {
	fill: rgb(249, 249, 250);
}

#urlbar ::-moz-selection,
#navigator-toolbox .searchbar-textbox ::-moz-selection,
.browserContainer > findbar ::-moz-selection {
	background-color: var(--chrome-selection-background-color);
	color: var(--chrome-selection-color);
	box-shadow: none !important;
}

/* Change the base colors for the browser chrome */

#TabsToolbar,
#browser-panel {
	background: var(--chrome-background-color);
	color: var(--chrome-color);
}

#navigator-toolbox > toolbar:not(#TabsToolbar):not(#toolbar-menubar),
.browserContainer > findbar,
#browser-bottombox {
	background-color: var(--chrome-secondary-background-color) !important;
	background-image: none !important;
	color: var(--chrome-color);
}

/* Default findbar text color doesn't look good - Bug 1125677 */
.browserContainer > findbar .findbar-find-status,
.browserContainer > findbar .found-matches,
.browserContainer > findbar .findbar-button {
	color: inherit;
}

/* URL bar and search bar*/
#urlbar:not([focused="true"]),
.searchbar-textbox:not([focused="true"]) {
	border-color: var(--chrome-nav-bar-controls-border-color);
	box-shadow: none !important;
	border-radius: 0 !important;
}

#urlbar[pageproxystate="valid"] > #identity-box.verifiedIdentity > #identity-icon-labels:-moz-lwtheme-brighttext {
	color: #30e60b;
}

#urlbar-zoom-button:-moz-lwtheme-brighttext:hover {
	background-color: rgba(255,255,255,.2);
}

#urlbar-zoom-button:-moz-lwtheme-brighttext:hover:active {
	background-color: rgba(255,255,255,.3);
}

.tab-icon-sound[soundplaying],
.tab-icon-sound[muted] {
	filter: none !important; /* removes drop-shadow filter */
}


/* The menubar and tabs toolbar should match the devedition theme */
#TabsToolbar,
#toolbar-menubar {
	-moz-appearance: none !important;
	color: var(--color8) !important;
}
#main-menubar {
	color: var(--chrome-color) !important;
}
#main-menubar > menu:not([open]) {
	color: inherit !important;
}

.tabbrowser-tab[selected="true"] {
	color: var(--chrome-color) !important;
}

.tabbrowser-tab::after, .tabbrowser-tab::before {
	border: none !important;
}

#urlbar, .searchbar-textbox {
	border: none !important;
	background-color: transparent !important;
	color: var(--foreground) !important;
}

findbar {
	color: var(--foreground) !important;
}

.findbar-find-previous, .findbar-find-next {
	border: none !important;
	background-color: var(--background) !important;
	background-image: none !important;
}

.findbar-textbox {
	border: none !important;
	border-radius: 0 !important;
	background-color: var(--background) !important;
	outline: none !important;
	box-shadow: none !important;
	color: var(--foreground) !important;
}

.findbar-button:hover {
	background-color: inherit !important;
}

.findbar-button:hover .toolbarbutton-text {
	background-color: var(--color7) !important;
}

.findbar-button[checked="true"] {
	background: transparent !important;
	color: var(--background) !important;
}

.findbar-button[checked="true"] .toolbarbutton-text {
	background-color: var(--foreground) !important;
}

/*
 * Originally from:
 * http://forums.mozillazine.org/viewtopic.php?p=14404121#p14404121
 */


#urlbar[pageproxystate='valid'] #identity-box.chromeUI,
#urlbar[pageproxystate='valid'] #identity-box.extensionPage {
	color: var(--color4) !important;
	--urlbar-separator-color: currentColor !important;
}

#urlbar[pageproxystate='valid'] #identity-box.verifiedIdentity,
#urlbar[pageproxystate='valid'] #identity-box.verifiedDomain,
#urlbar[pageproxystate='valid'] #identity-box.mixedActiveBlocked {
	color: var(--color2) !important;
	--urlbar-separator-color: currentColor !important;
}

#urlbar[pageproxystate='valid'] #identity-box.mixedDisplayContent,
#urlbar[pageproxystate='valid'] #identity-box.mixedDisplayContentLoadedActiveBlocked,
#urlbar[pageproxystate='valid'] #identity-box.certUserOverridden,
#urlbar[pageproxystate='valid'] #identity-box.weakCipher {
	color: var(--color3) !important;
	--urlbar-separator-color: currentColor !important;
}

#urlbar[pageproxystate='valid'] #identity-box.unknownIdentity,
#urlbar[pageproxystate='valid'] #identity-box.mixedActiveContent,
#urlbar[pageproxystate='valid'] #identity-box.insecureLoginForms {
	color: var(--color1) !important;
	--urlbar-separator-color: currentColor !important;
}

#identity-icon-labels {
	color: inherit !important;
}

#connection-icon {
	fill: currentColor !important;
}

#sidebar-box {
	color: inherit !important;
	background-color: inherit !important;
}


#search-box {
	background-color: var(--background) !important;
	border: none !important;
}

@-moz-document
url("chrome://browser/content/browser.xul"),
url("chrome://browser/content/bookmarks/bookmarksPanel.xul"),
url("chrome://browser/content/history/history-panel.xul") {
	#sidebar, #sidebar-header, #bookmarksPanel, #bookmarks-view, #history-panel, #historyTree {
		background: var(--chrome-background-color) !important;
		color: var(--chrome-color) !important;
	}
}

.tab-content[pinned][titlechanged]:not([selected="true"]) {
	background-image: none !important;
	background-color: var(--color4) !important;
}

/*
 * Make borders transparent
 */
:root:not([customizing]) #navigator-toolbox {
	--tabs-border: transparent;
}

:root:not([customizing]) #nav-bar {
	--tabs-border-color: transparent;
}

/*
 * Hide the tab close button when not hovering over the tabs
 */
.tabbrowser-tab:not([pinned]) .tab-close-button {
	display: none !important;
}

.tabbrowser-tab:not([pinned]):hover .tab-close-button {
	display: -moz-box !important;
}

/*
 * Hide the newtab button
 */
.tabs-newtab-button {
	display: none;
}

.tab-line {
	height: .2em !important;
}

/*
 * Make favicons of inactive tabs greyscale
 */
.tabbrowser-tab:not([selected="true"]) .tab-icon-image {
	filter: grayscale(100%) contrast(50%) !important;
}

#urlbar-container {
	text-align: center;
}

#identity-box {
	border: none !important;
}

#identity-icon-labels {
	display: none !important;
}

/* Forwards, back, home, bookmarks, sidebar… */
.chromeclass-toolbar-additional {
	display: none;
}

/* Url three dots, Pocket, bookmark star… */
#page-action-buttons {
	display: none;
}

/* hamburger menu */
#PanelUI-button {
	border: none !important;
}

/* Condens tabs */
:root {
	--tab-min-height: 22px !important;
}

.tabbrowser-tab {
	/*   border: 1px solid red !impotant; */
	max-height: var(--tab-min-height) !important;
}

/* Make pinned tabs smaller */
.tab-content[pinned] {
	padding: 0 6px !important;
}

/*
 * https://gist.github.com/Sporif/db6b3440fba0b1bcf5477afacf93f875
 */
#alltabs-button {
	-moz-binding: url(data:text/xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8IS0tIENvcHlyaWdodCAoYykgMjAxNyBIYWdnYWkgTnVjaGkNCkF2YWlsYWJsZSBmb3IgdXNlIHVuZGVyIHRoZSBNSVQgTGljZW5zZToNCmh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUDQogLS0+DQoNCjwhLS0gUnVuIHVzZXJDaHJvbWUuanMvdXNlckNocm9tZS54dWwgYW5kIC51Yy5qcy8udWMueHVsLy5jc3MgZmlsZXMgIC0tPg0KPGJpbmRpbmdzIHhtbG5zPSJodHRwOi8vd3d3Lm1vemlsbGEub3JnL3hibCI+DQogICAgPGJpbmRpbmcgaWQ9ImpzIiBleHRlbmRzPSJjaHJvbWU6Ly9nbG9iYWwvY29udGVudC9iaW5kaW5ncy90b29sYmFyYnV0dG9uLnhtbCNtZW51Ij4NCiAgICAgICAgPGltcGxlbWVudGF0aW9uPg0KICAgICAgICAgICAgPGNvbnN0cnVjdG9yPjwhW0NEQVRBWw0KICAgICAgICAgICAgICAgIGlmKHdpbmRvdy51c2VyQ2hyb21lSnNNb2QpIHJldHVybjsNCiAgICAgICAgICAgICAgICB3aW5kb3cudXNlckNocm9tZUpzTW9kID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB2YXIgY2hyb21lRmlsZXMgPSBGaWxlVXRpbHMuZ2V0RGlyKCJVQ2hybSIsIFtdKS5kaXJlY3RvcnlFbnRyaWVzOw0KICAgICAgICAgICAgICAgIHZhciB4dWxGaWxlcyA9IFtdOw0KICAgICAgICAgICAgICAgIHZhciBzc3MgPSBDY1snQG1vemlsbGEub3JnL2NvbnRlbnQvc3R5bGUtc2hlZXQtc2VydmljZTsxJ10uZ2V0U2VydmljZShDaS5uc0lTdHlsZVNoZWV0U2VydmljZSk7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgd2hpbGUoY2hyb21lRmlsZXMuaGFzTW9yZUVsZW1lbnRzKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGUgPSBjaHJvbWVGaWxlcy5nZXROZXh0KCkuUXVlcnlJbnRlcmZhY2UoQ2kubnNJRmlsZSk7DQogICAgICAgICAgICAgICAgICAgIHZhciBmaWxlVVJJID0gU2VydmljZXMuaW8ubmV3RmlsZVVSSShmaWxlKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmKGZpbGUuaXNGaWxlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKC8oXnVzZXJDaHJvbWV8XC51YylcLmpzJC9pLnRlc3QoZmlsZS5sZWFmTmFtZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTZXJ2aWNlcy5zY3JpcHRsb2FkZXIubG9hZFN1YlNjcmlwdFdpdGhPcHRpb25zKGZpbGVVUkkuc3BlYywge3RhcmdldDogd2luZG93LCBpZ25vcmVDYWNoZTogdHJ1ZX0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZigvKF51c2VyQ2hyb21lfFwudWMpXC54dWwkL2kudGVzdChmaWxlLmxlYWZOYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh1bEZpbGVzLnB1c2goZmlsZVVSSS5zcGVjKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoL1wuYXNcLmNzcyQvaS50ZXN0KGZpbGUubGVhZk5hbWUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXNzcy5zaGVldFJlZ2lzdGVyZWQoZmlsZVVSSSwgc3NzLkFHRU5UX1NIRUVUKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3NzLmxvYWRBbmRSZWdpc3RlclNoZWV0KGZpbGVVUkksIHNzcy5BR0VOVF9TSEVFVCk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKC9eKD8hKHVzZXJDaHJvbWV8dXNlckNvbnRlbnQpXC5jc3MkKS4rXC5jc3MkL2kudGVzdChmaWxlLmxlYWZOYW1lKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFzc3Muc2hlZXRSZWdpc3RlcmVkKGZpbGVVUkksIHNzcy5VU0VSX1NIRUVUKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3NzLmxvYWRBbmRSZWdpc3RlclNoZWV0KGZpbGVVUkksIHNzcy5VU0VSX1NIRUVUKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uIGxvYWRYVUwoKSB7DQogICAgICAgICAgICAgICAgICAgIGlmKHh1bEZpbGVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvYWRPdmVybGF5KHh1bEZpbGVzLnNoaWZ0KCksIG51bGwpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChsb2FkWFVMLCA1KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0sIDApOw0KICAgICAgICAgICAgXV0+PC9jb25zdHJ1Y3Rvcj4NCiAgICAgICAgPC9pbXBsZW1lbnRhdGlvbj4NCiAgICA8L2JpbmRpbmc+DQo8L2JpbmRpbmdzPg==);
}

/* Remove white border below nav bar */
#navigator-toolbox::after {
	content: none !important;
}
